{% extends 'base_site.html' %}

{% block title %}Add New Student{% endblock %}
{% block breadcrumb %}
    <div class="flex [.header_&amp;]:below-lg:hidden items-center gap-1.25 text-xs lg:text-sm font-medium mb-2.5 lg:mb-0" data-reparent="true" data-reparent-mode="prepend|lg:prepend" data-reparent-target="#content_container|lg:#header_container">
        <span class="text-gray-600">Dashboard</span>
        <i class="ki-filled ki-right text-gray-500 text-3xs"></i>
        <span class="text-gray-700">Add New Student</span>
    </div>
{% endblock breadcrumb %}

{% block content %}
    <style>
        #previewImg{
            display: block;
            margin: 0 auto;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            object-position: top center;
        }
        .preview-image{
            width: 150px;
            height: 150px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            border-radius: 50%;
        }
        #id_profile_image{
            display: none;
        }
        .preview-image label{
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px 0 5px 0;
            cursor: pointer;
        }
        .preview-image label img{
            filter: brightness(0) saturate(100%) invert(100%) sepia(100%) saturate(0%) hue-rotate(305deg) brightness(102%) contrast(104%);
            max-width: 20px;
            margin: 0 auto;
        }
        .radio label{
            color: #9a9cae;
            font-size: 15px;
        }
    </style>
    <div class="container-fixed">
        <div class="flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5">
            <div class="flex flex-col justify-center gap-2">
                <h1 class="text-2xl font-semibold leading-none text-gray-900 mb1.5">Add New Student</h1>
            </div>
        </div>

        <form method="post" novalidate="novalidate" id="add_student_form" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.errors }}
            {% if form.non_field_errors %}
                <span class="text-danger">{{ form.non_field_errors }}</span>
            {% endif %}
            <div class="grid grid-cols-3 gap-5">
                <div class="col-span-1">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title font-medium text-md">Profile Image</h2>
                        </div>
                        <div class="card-body">
                            <div class="preview-image">
                                <img src="/static/media/avatars/300-1.png" alt="Teacher Thumbnail Image" id="previewImg">
                                <label for="{{ form.profile_image.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">
                                    {{ form.profile_image }}
                                    <img src="/static/media/camera.svg" alt="">
                                </label>
                            </div>
                            <span class="text-danger">{{ form.profile_image.errors }}</span>
                            
                        </div>
                    </div>
                    <div class="card mt-5">
                        <div class="card-header">
                            <h2 class="card-title font-medium text-md">Class Details</h2>
                        </div>
                        <div class="card-body">
                            <div>
                                <label for="{{ form.grade.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.grade.label }}<span class="text-danger">*</span></label>
                                {{ form.grade }}
                                {% if form.grade.errors %}<span class="text-danger">{{ form.grade.errors }}</span>{% endif %}
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="col-span-2">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title font-medium text-md">Personal Details</h2>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2 gap-5">
                                <div>
                                    <label for="{{ form.first_name.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.first_name.label }}<span class="text-danger">*</span></label>
                                    {{ form.first_name }}
                                    <span class="text-danger">{{ form.first_name.errors }}</span>
                                </div>
                                <div>
                                    <label for="{{ form.last_name.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.last_name.label }}<span class="text-danger">*</span></label>
                                    {{ form.last_name }}
                                    <span class="text-danger">{{ form.last_name.errors }}</span>
                                </div>
                                <div>
                                    <label for="{{ form.date_of_birth.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.date_of_birth.label }}<span class="text-danger">*</span></label>
                                    {{ form.date_of_birth }}
                                    <span class="text-danger">{{ form.date_of_birth.errors }}</span>
                                </div>
                                <div>
                                    <label for="{{ form.blood_group.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.blood_group.label }}<span class="text-danger">*</span></label>
                                    {{ form.blood_group }}
                                    <span class="text-danger">{{ form.blood_group.errors }}</span>
                                </div>
                                <div class="col-span-2">
                                    <label for="{{ form.gender.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.gender.label }}<span class="text-danger">*</span></label>
                                    {{ form.gender }}
                                    <span class="text-danger">{{ form.gender.errors }}</span>
                                </div>
                                <div class="col-span-2">
                                    <label for="{{ form.address.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.address.label }}<span class="text-danger">*</span></label>
                                    {{ form.address }}
                                    <span class="text-danger">{{ form.address.errors }}</span>
                                </div>
                                <div>
                                    <label for="{{ form.caste.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.caste.label }}<span class="text-danger">*</span></label>
                                    {{ form.caste }}
                                    <span class="text-danger">{{ form.caste.errors }}</span>
                                </div>
                                <div>
                                    <label for="{{ form.religion.id_for_label }}" class="form-label flex items-center gap-1 mb-2 capitalize">{{ form.religion.label }}<span class="text-danger">*</span></label>
                                    {{ form.religion }}
                                    <span class="text-danger">{{ form.religion.errors }}</span>
                                </div>
                            </div>
                            
                            
                        </div>
                    </div>

                    <div class="card mt-5">
                        <div class="card-header">
                            <h2 class="card-title font-medium text-md">Father Details</h2>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2 gap-5">
                                <div>
                                    <label for="{{ form.father_name.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.father_name.label }}<span class="text-danger">*</span></label>
                                    {{ form.father_name }}
                                    {% if form.father_name.errors %}<span class="text-danger">{{ form.father_name.errors }}</span>{% endif %}
                                </div>
                                <div>
                                    <label for="{{ form.father_phone.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.father_phone.label }}<span class="text-danger">*</span></label>
                                    {{ form.father_phone }}
                                    {% if form.father_phone.errors %}<span class="text-danger">{{ form.father_phone.errors }}</span>{% endif %}
                                </div>
                                <div class="col-span-2">
                                    <label for="{{ form.father_email.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.father_email.label }}<span class="text-danger">*</span></label>
                                    {{ form.father_email }}
                                    {% if form.father_email.errors %}<span class="text-danger">{{ form.father_email.errors }}</span>{% endif %}
                                </div>
                            </div>
                            
                            
                        </div>
                    </div>
                    
                    <div class="card mt-5">
                        <div class="card-header">
                            <h2 class="card-title font-medium text-md">Mother Details</h2>
                        </div>
                        <div class="card-body">
                            <div class="grid grid-cols-2 gap-5">
                                <div>
                                    <label for="{{ form.mother_name.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.mother_name.label }}<span class="text-danger">*</span></label>
                                    {{ form.mother_name }}
                                    {% if form.mother_name.errors %}<span class="text-danger">{{ form.mother_name.errors }}</span>{% endif %}
                                </div>
                                <div>
                                    <label for="{{ form.mother_phone.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.mother_phone.label }}<span class="text-danger">*</span></label>
                                    {{ form.mother_phone }}
                                    {% if form.mother_phone.errors %}<span class="text-danger">{{ form.mother_phone.errors }}</span>{% endif %}
                                </div>
                                <div class="col-span-2">
                                    <label for="{{ form.father_email.id_for_label }}" class="form-label flex items-center gap-1 max-w-32 mb-2 capitalize">{{ form.mother_email.label }}<span class="text-danger">*</span></label>
                                    {{ form.mother_email }}
                                    {% if form.father_email.errors %}<span class="text-danger">{{ form.father_email.errors }}</span>{% endif %}
                                </div>
                               
                            </div>
                            
                            
                        </div>
                    </div>

                    <div class="text-right mt-5 flex justify-end gap-5">
                        <button type="reset" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Student</button>
                    </div>
                </div>
            </div>
            
        </form>
        
    </div>
{% endblock content %}


{% block extra_js %}
    <script>
        function dragNdrop(event) {
            var fileName = URL.createObjectURL(event.target.files[0]);
            var preview = document.getElementById("preview");
            var previewImg = document.getElementById("previewImg");
            previewImg.setAttribute("src", fileName);
            preview.innerHTML = "";
            preview.appendChild(previewImg);
        }
        $(document).change(function(event){
            dragNdrop(event);
        });
    </script>
{% endblock extra_js %}
    